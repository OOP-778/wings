{
  "meta": {
    "version": "1.0",
    "update_url": null
  },
  "exported_at": "2021-06-11T16:45:35+01:00",
  "name": "OopSdkManEgg-Java",
  "author": "OOP-778",
  "description": "Allows to launch any java application, this egg allows you to enable the use of iptables it requires the Wings to be from mine repository at https://github.com/OOP-778/wings",
  "features": [],
  "images": [
    "ymonnier/sdkman-java"
  ],
  "file_denylist": [],
  "startup": "java -Xms128M -Xmx{{SERVER_MEMORY}}M -jar {{SERVER_JARFILE}}",
  "config": {
    "files": "{\r\n    \"server.properties\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"server-ip\": \"0.0.0.0\",\r\n            \"enable-query\": \"true\",\r\n            \"server-port\": \"{{server.build.default.port}}\",\r\n            \"query.port\": \"{{server.build.default.port}}\"\r\n        }\r\n    }\r\n}",
    "startup": "{\r\n    \"done\": \")! For help, type \",\r\n    \"userInteraction\": [\r\n        \"Go to eula.txt for more info.\"\r\n    ]\r\n}",
    "logs": "{\r\n    \"custom\": false,\r\n    \"location\": \"logs\/latest.log\"\r\n}",
    "stop": "stop"
  },
  "scripts": {
    "installation": {
      "script": "#!\/bin\/bash\r\n# Spigot Installation Script\r\n#\r\n# Server Files: \/mnt\/server\r\n\r\napt update \r\napt install -y curl wget git openssl bash bc apt-transport-https gnupg software-properties-common\r\nwget -qO - https:\/\/adoptopenjdk.jfrog.io\/adoptopenjdk\/api\/gpg\/key\/public | apt-key add -\r\nadd-apt-repository --yes https:\/\/adoptopenjdk.jfrog.io\/adoptopenjdk\/deb\/\r\napt update\r\nmkdir -p \/usr\/share\/man\/man1\r\nif [ \"${DL_VERSION}\" == \"latest\" ] || (( $(echo \"${DL_VERSION} >= 1.17\" | bc -l) )); then\r\n    apt install -y adoptopenjdk-16-hotspot\r\nelse\r\n    apt install -y adoptopenjdk-8-hotspot\r\nfi\r\n\r\n## Only download if a path is provided, otherwise continue.\r\nif [ ! -z \"${DL_PATH}\" ]; then\r\n    cd \/mnt\/server\r\n\r\n    MODIFIED_DOWNLOAD=`eval echo $(echo ${DL_PATH} | sed -e 's\/{{\/${\/g' -e 's\/}}\/}\/g')`\r\n    curl -sSL -o ${SERVER_JARFILE} ${MODIFIED_DOWNLOAD}\r\nelse\r\n    mkdir -p \/srv\/\r\n    cd \/srv\/\r\n    \r\n    wget https:\/\/hub.spigotmc.org\/jenkins\/job\/BuildTools\/lastSuccessfulBuild\/artifact\/target\/BuildTools.jar\r\n    \r\n    java -jar BuildTools.jar --rev ${DL_VERSION}\r\n\r\n    mv spigot-*.jar \/mnt\/server\/${SERVER_JARFILE}\r\nfi",
      "container": "debian:buster-slim",
      "entrypoint": "bash"
    }
  },
  "variables": [
    {
      "name": "Java Vendor Version",
      "description": "The name of the vendor that provides the java jar. You can find find a list of available JDK's and version https://sdkman.io/jdks",
      "env_variable": "JAVA_VENDOR",
      "default_value": "8.0.292.hs-adpt",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|regex:^([^ ]+)\\.([^ ]+)$"
    },
    {
      "name": "Jar File",
      "description": "The name of the server jarfile to run the application with",
      "env_variable": "SERVER_JARFILE",
      "default_value": "application.jar",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|regex:\/^([\\w\\d._-]+)(\\.jar)$\/"
    }
  ]
}